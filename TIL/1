const userBudget = {
  food: 200000,
  transport: 100000,
  hobby: 150000,
  shopping: 100000,
  etc: 50000,
};

const userSpending = [
  { category: 'food', amount: 12000, date: '2025-06-01' },
  { category: 'food', amount: 50000, date: '2025-06-10' },
  { category: 'transport', amount: 40000, date: '2025-06-05' },
  { category: 'hobby', amount: 80000, date: '2025-06-07' },
  { category: 'hobby', amount: 100000, date: '2025-06-12' },
  { category: 'shopping', amount: 60000, date: '2025-06-15' },
  { category: 'etc', amount: 55000, date: '2025-06-17' },
  { category: 'food', amount: 90000, date: '2025-06-28' },
];

// í˜„ì¬ ë‹¬
const currentMonth = new Date().getMonth(); // 0~11

// ì¹´í…Œê³ ë¦¬ë³„ í•©ì‚°
const monthlySpending = userSpending.reduce((acc, { category, amount, date }) => {
  const d = new Date(date);
  if (d.getMonth() !== currentMonth) return acc; // ì´ë²ˆ ë‹¬ ì•„ë‹ˆë©´ ë¬´ì‹œ

  if (!acc[category]) acc[category] = 0;
  acc[category] += amount;
  return acc;
}, {});

// ì ˆì•½ ë©”ì‹œì§€
const savingTips = {
  food: 'ì‹ë¹„ëŠ” ë°°ë‹¬ë³´ë‹¨ ì§ì ‘ ìš”ë¦¬í•˜ê±°ë‚˜ ë„ì‹œë½ì„ ì¶”ì²œí•©ë‹ˆë‹¤!',
  transport: 'ëŒ€ì¤‘êµí†µ ì •ê¸°ê¶Œì„ í™œìš©í•´ë³´ì„¸ìš”!',
  hobby: 'ì·¨ë¯¸ ì†Œë¹„ëŠ” ë¬´ë£Œ ì²´í—˜ë¶€í„° ì‹œì‘í•´ë³´ëŠ” ê±´ ì–´ë•Œìš”?',
  shopping: 'ë¶ˆí•„ìš”í•œ ì†Œë¹„ëŠ” ì¥ë°”êµ¬ë‹ˆì— ë‹´ê³  í•˜ë£¨ ë’¤ì— ê²°ì œí•˜ì„¸ìš”!',
  etc: 'ê¸°íƒ€ ì§€ì¶œì€ ì •ë¦¬ë˜ì§€ ì•Šìœ¼ë©´ ëˆ„ìˆ˜ê°€ ì»¤ì§‘ë‹ˆë‹¤. í•œ ë²ˆ ë” ì ê²€í•´ë³´ì„¸ìš”.',
};

// ê²°ê³¼ ë¶„ì„
const analyzeSpending = (spending, budget) => {
  console.log(`ğŸ“Š [ì´ë²ˆ ë‹¬ ì†Œë¹„ ë¶„ì„ ê²°ê³¼]\n`);

  Object.keys(budget).forEach((category) => {
    const spent = spending[category] || 0;
    const limit = budget[category];
    const percent = Math.round((spent / limit) * 100);

    let message = `- ${category.toUpperCase()}: ${spent.toLocaleString()}ì› / ${limit.toLocaleString()}ì› (${percent}%)`;

    if (spent > limit) {
      message += ` âš ï¸ ì˜ˆì‚° ì´ˆê³¼! â†’ ${savingTips[category]}`;
    } else if (percent >= 80) {
      message += ` ğŸŸ¡ ì˜ˆì‚° ê·¼ì ‘. ê´€ë¦¬ê°€ í•„ìš”í•´ìš”.`;
    } else {
      message += ` âœ… ì•ˆì •ì ì¸ ì§€ì¶œì…ë‹ˆë‹¤.`;
    }

    console.log(message);
  });
};

// ì‹¤í–‰
analyzeSpending(monthlySpending, userBudget);
